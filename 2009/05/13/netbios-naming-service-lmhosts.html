<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>NetBIOS Naming Service + lmhosts - Chase Seibert Blog</title>
<meta name="description" content="Recently, I have been working on a project using Alfresco JLAN to simulate a Windows CIFS (aka Samba) share in Java. Not being able to (easily) replace the entire Windows file sharing stack, it instead advertises its virtual host name via a Win32 API call to the NetBIOS Naming Service.">


  <meta name="author" content="Chase Seibert">
  
  <meta property="article:author" content="Chase Seibert">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Chase Seibert Blog">
<meta property="og:title" content="NetBIOS Naming Service + lmhosts">
<meta property="og:url" content="https://chase-seibert.github.io/blog/2009/05/13/netbios-naming-service-lmhosts.html">


  <meta property="og:description" content="Recently, I have been working on a project using Alfresco JLAN to simulate a Windows CIFS (aka Samba) share in Java. Not being able to (easily) replace the entire Windows file sharing stack, it instead advertises its virtual host name via a Win32 API call to the NetBIOS Naming Service.">





  <meta name="twitter:site" content="@chase_seibert">
  <meta name="twitter:title" content="NetBIOS Naming Service + lmhosts">
  <meta name="twitter:description" content="Recently, I have been working on a project using Alfresco JLAN to simulate a Windows CIFS (aka Samba) share in Java. Not being able to (easily) replace the entire Windows file sharing stack, it instead advertises its virtual host name via a Win32 API call to the NetBIOS Naming Service.">
  <meta name="twitter:url" content="https://chase-seibert.github.io/blog/2009/05/13/netbios-naming-service-lmhosts.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2009-05-13T00:00:00+00:00">






<link rel="canonical" href="https://chase-seibert.github.io/blog/2009/05/13/netbios-naming-service-lmhosts.html">







  <meta name="google-site-verification" content="KbUN2yK33xTFIQa6xopl2QZyG02prTwsPwnCTjRRYMM" />






<!-- end _includes/seo.html -->



  <link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Chase Seibert Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/blog/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon">
<a rel="me" href="https://hachyderm.io/@chase_seibert"></a>
  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/blog/">
          Chase Seibert Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/blog/me/"
                
                
              >Top Posts</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/reading-list/"
                
                
              >Reading List</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/resume.pdf"
                
                
              >Resume</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://chase-seibert.github.io/blog/">
        <img src="/blog/images/chase-square.jpg" alt="Chase Seibert" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://chase-seibert.github.io/blog/" itemprop="url">Chase Seibert</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Director of Engineering at Dropbox</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">San Francisco, CA</span>
        </li>
      

      
        
          
            <li><a href="https://www.facebook.com/chase.seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/chase-seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.goodreads.com/chaseseibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-goodreads" aria-hidden="true"></i><span class="label">Goodreads</span></a></li>
          
        
          
            <li><a href="https://letterboxd.com/quasigenx/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-film" aria-hidden="true"></i><span class="label">Letterboxd</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/chaseseibert/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://hachyderm.io/@chase_seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i><span class="label">Mastodon</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/7679" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="NetBIOS Naming Service + lmhosts">
    <meta itemprop="description" content="Recently, I have been working on a project using Alfresco JLAN to simulate a Windows CIFS (aka Samba) share in Java. Not being able to (easily) replace the entire Windows file sharing stack, it instead advertises its virtual host name via a Win32 API call to the NetBIOS Naming Service.">
    <meta itemprop="datePublished" content="2009-05-13T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://chase-seibert.github.io/blog/2009/05/13/netbios-naming-service-lmhosts.html" itemprop="url">NetBIOS Naming Service + lmhosts
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>
Recently, I have been working on a project using <a href="http://www.alfresco.com/products/aifs/">Alfresco JLAN</a> to simulate a Windows <a href="http://en.wikipedia.org/wiki/Server_Message_Block">CIFS</a> (aka Samba) share in Java. Not being able to (easily) replace the entire Windows file sharing stack, it instead advertises its virtual host name via a Win32 API call to the NetBIOS Naming Service.
</p>

<p>
From the <a href="http://en.wikipedia.org/wiki/NetBIOS_over_TCP/IP#Name_service">NetBIOS Wikipedia entry</a>:
</p>

<blockquote>In NetBIOS, each participant must register on the network using a unique name of at most 16 characters. In legacy networks, when a new application wanted to register a name, it had to broadcast a message saying "Is anyone currently using that name?" and wait for an answer. If no answer came back, it was safe to assume that the name was not in use. However, the wait timeout was a few seconds, making the name registration a very lengthy process, as the only way of knowing that a name was not registered was to not receive any answer.</blockquote>

<p>
When attempting to roll it out to production, we ran into an interesting issue. Unlike our QA system, production has multiple <a href="http://en.wikipedia.org/wiki/Subnetwork">IP subnets</a>. When the NetBIOS broadcast goes out, it only gets broadcast to the local subnet. As a result, only systems on that subnet can address it by name. We actually broke out <a href="http://www.wireshark.org/">Wireshark</a> on both the server and the client side to verify that yes, indeed, the broadcasts were not seen on the remote subnet(s):
</p>

<a href="http://picasaweb.google.com/lh/photo/kMMnxHFFTMZuEZd2J3NOmA?feat=directlink"><img src='http://lh3.ggpht.com/_EE2zVzGv1Ds/SgsYqkG5NOI/AAAAAAAAIC0/xGLqkNcNgZo/s800/wireshark_netbios.gif'></a>

<p>
This actually makes perfect sense, but not being involved in the day-to-day networking in the office, it took me a while to see why. One of the purposes of the subnets is to reduce broadcast traffic; allowing an overly chatty network can lead to congestion. And while there are <a href="http://routergod.com/trinity/">router-level solutions</a> to let certain broadcasts cross subnets, those are something of a maintenance nightmare. 
</p>

<p>
A simple solution turned out to be the Windows <a href="http://en.wikipedia.org/wiki/LMHOSTS">lmhosts</a> file. It works like the regular hosts file, but ties NetBIOS (versus DNS) names to IP addresses. By manually configuring the mapping in this file on the client(s), we can side-step the whole broadcast/subnet issue. Just remember to rename the file from lmhosts.sam to just lhmosts.
</p>

        
      </section>

      <footer class="page__meta">
        
        




    <p class="page__date">
        <strong><i class="fas fa-fw fa-edit" aria-hidden="true"></i> GitHub:</strong>
        <a href="https://github.com/chase-seibert/blog/blob/master/_posts/2009-05-13-netbios-naming-service-lmhosts.html">_posts/2009-05-13-netbios-naming-service-lmhosts.html</a>
    </p>

        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2009-05-13T00:00:00+00:00">May 13, 2009</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2009/05/08/ruby-on-rails-first-impressions.html" class="pagination--pager" title="Ruby on Rails - First Impressions">Previous</a>
    
    
      <a href="/blog/2009/05/26/coldfusion-whitespace.html" class="pagination--pager" title="ColdFusion whitespace">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/blog/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="https://chase-seibert.github.io">Chase Seibert Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/blog/assets/js/main.min.js"></script>









  </body>
</html>
