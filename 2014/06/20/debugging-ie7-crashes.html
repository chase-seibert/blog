<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Debugging an IE7 browser crash (manual git bisect) - Chase Seibert Blog</title>
<meta name="description" content="Every once in a while, you have to put in a heroic effort to diagnose a bug. When you finally figure it out, you want to run around the office singing “We are the champions”, even if it turns out to be a trivial issue. Because that doesn’t mean it took a trivial amount of effort.">


  <meta name="author" content="Chase Seibert">
  
  <meta property="article:author" content="Chase Seibert">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Chase Seibert Blog">
<meta property="og:title" content="Debugging an IE7 browser crash (manual git bisect)">
<meta property="og:url" content="https://chase-seibert.github.io/blog/2014/06/20/debugging-ie7-crashes.html">


  <meta property="og:description" content="Every once in a while, you have to put in a heroic effort to diagnose a bug. When you finally figure it out, you want to run around the office singing “We are the champions”, even if it turns out to be a trivial issue. Because that doesn’t mean it took a trivial amount of effort.">





  <meta name="twitter:site" content="@chase_seibert">
  <meta name="twitter:title" content="Debugging an IE7 browser crash (manual git bisect)">
  <meta name="twitter:description" content="Every once in a while, you have to put in a heroic effort to diagnose a bug. When you finally figure it out, you want to run around the office singing “We are the champions”, even if it turns out to be a trivial issue. Because that doesn’t mean it took a trivial amount of effort.">
  <meta name="twitter:url" content="https://chase-seibert.github.io/blog/2014/06/20/debugging-ie7-crashes.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2014-06-20T00:00:00+00:00">






<link rel="canonical" href="https://chase-seibert.github.io/blog/2014/06/20/debugging-ie7-crashes.html">







  <meta name="google-site-verification" content="KbUN2yK33xTFIQa6xopl2QZyG02prTwsPwnCTjRRYMM" />






<!-- end _includes/seo.html -->



  <link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Chase Seibert Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/blog/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon">
<a rel="me" href="https://hachyderm.io/@chase_seibert"></a>
  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/blog/">
          Chase Seibert Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/blog/me/"
                
                
              >Top Posts</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/reading-list/"
                
                
              >Reading List</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/resume.pdf"
                
                
              >Resume</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://chase-seibert.github.io/blog/">
        <img src="/blog/images/chase-square.jpg" alt="Chase Seibert" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://chase-seibert.github.io/blog/" itemprop="url">Chase Seibert</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Director of Engineering at Dropbox</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">San Francisco, CA</span>
        </li>
      

      
        
          
            <li><a href="https://www.facebook.com/chase.seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/chase-seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.goodreads.com/chaseseibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-goodreads" aria-hidden="true"></i><span class="label">Goodreads</span></a></li>
          
        
          
            <li><a href="https://letterboxd.com/quasigenx/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-film" aria-hidden="true"></i><span class="label">Letterboxd</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/chaseseibert/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://hachyderm.io/@chase_seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i><span class="label">Mastodon</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/7679" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Debugging an IE7 browser crash (manual git bisect)">
    <meta itemprop="description" content="Every once in a while, you have to put in a heroic effort to diagnose a bug. Whenyou finally figure it out, you want to run around the office singing “We are thechampions”, even if it turns out to be a trivial issue. Because that doesn’t meanit took a trivial amount of effort.">
    <meta itemprop="datePublished" content="2014-06-20T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://chase-seibert.github.io/blog/2014/06/20/debugging-ie7-crashes.html" itemprop="url">Debugging an IE7 browser crash (manual git bisect)
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>Every once in a while, you have to put in a heroic effort to diagnose a bug. When
you finally figure it out, you want to run around the office singing “We are the
champions”, even if it turns out to be a trivial issue. Because that doesn’t mean
it took a trivial amount of effort.</p>

<p>Recently I had a bug report cross my desk that our web app was crashing IE7.
Luckily IE7 is only about 3% of our overall userbase. As of May 2014, it’s only
<a href="http://www.w3schools.com/browsers/browsers_explorer.asp">about .2% of global browser market share</a>,
but we have a lot of enterprise customers who are slower to upgrade. Regardless,
definitely a high severity bug.</p>

<p>As an aside, I find browser crashes to be ridiculous. I know this browser was
written back in the dark ages of 2005, but still. If you’re implementing a browser,
you know you are basically going to be taking random markup and javascript from
essentially an untrusted user. You would think you would be as meticulous as
possible to trap every conceivable exception.</p>

<p>But no. In the case of a browser crash, you don’t get a stack trace. You don’t even
get the dreaded “Object Expected” error (the single most useless error of all time).
What puny developer tools that Microsoft deigned to provide back in 2005 are of
absolutely no use. Instead, all you see is a white screen and the following:</p>

<p><img src="/blog/images/ie7_not_responding.png" alt="ie7 not responding" /></p>

<p>So it begins. In this case, I assume that we were not crashing IE7 at some point in
the recent past. Otherwise, we would have presumably received this bug report
earlier.</p>

<p>The first step is always to get a reproducible. I can reproduce using my trusty
IE7 VirtualBox image provisioned from <a href="https://github.com/xdissent/ievms">xdissent/ievms</a>.
Knowing I’m in for a long haul, I also make some effort to get my reproducible steps
down to the smallest quickest nugget I can. First, I create a shortcut on my Windows
desktop called “clear cache”, with the following Target: <code class="language-plaintext highlighter-rouge">RunDll32.exe InetCpl.cpl,ClearMyTracksByProcess 255</code>.
I know from experience that if you don’t clear your cache between tests, you will be
hunting phantom cached files for hours. I make another shortcut with a direct link
to the page that crashes on my dev box.</p>

<p>I proceed to spend about an hour deleting random chunks of suspect code to see if I
can get it to stop crashing. If I’m successful, I start putting some of the deleted
code back in until it crashes again. This is a slow process. Sometimes it helps to
go old school and put actual <code class="language-plaintext highlighter-rouge">alert()</code> calls in between suspect lines. I finally
narrow it down to a require.js call to import a completely different file. Basically,
I have to start over on a new file.</p>

<p>So I change tactics and start what is essentially a binary search through our git
history to locate the exact commit where this occurs. <em>Note: if you can repo your
issue purely on the command line, you should use git bisect for this</em>.  I start
rolling back 10, 100, 1000 commits until I get a working build. I have to manually
refresh a browser each time.</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">git checkout upstream/master~10
git checkout upstream/master~100
git checkout upstream/master~1000</code></pre></figure>

<p>At 1,000 commits, I get a working build again. So I try 500 commits ago. Not working.
750 commits. Working. 625 commits, etc… After a surprisingly few iterations, I’m
left with a small set of potential breaking commits, which I manually browse through until
I see this:</p>

<p><img src="/blog/images/ie7_extra_comma.png" alt="ie7 extra comma" /></p>

<p>From experience, I suspected all along that this was likely either an unclosed HTML
tag in a javascript template, or an extra comma. I have seen both <a href="http://blog.bottomlessinc.com/2010/01/ie-bug-dont-put-extra-commas-in-your-js-arrays/">crash old versions</a>
of IE. What’s super-frustrating is that this is actually something that our automation
catches:</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="o">&gt;</span><span class="nx">jshint</span> <span class="nx">bad_file</span><span class="p">.</span><span class="nx">js</span>
<span class="kd">static</span><span class="sr">/js/</span><span class="nx">bad_file</span><span class="p">.</span><span class="nx">js</span><span class="p">:</span> <span class="nx">line</span> <span class="mi">611</span><span class="p">,</span> <span class="nx">col</span> <span class="mi">45</span><span class="p">,</span> <span class="nx">Extra</span> <span class="nx">comma</span><span class="p">.</span> <span class="p">(</span><span class="nx">it</span> <span class="nx">breaks</span> <span class="nx">older</span> <span class="nx">versions</span> <span class="k">of</span> <span class="nx">IE</span><span class="p">)</span></code></pre></figure>

<p>But we rely on individual engineers to install the automation and run it, which they
can also opt-out on for individual commits and files. In any case, it turned out to be
a one character fix after about 3 hours of work. In the future, I would save some
time by just running jshint on the entire repo.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/blog/tags/#git" class="page__taxonomy-item p-category" rel="tag">git</a><span class="sep">, </span>
    
      <a href="/blog/tags/#ie7" class="page__taxonomy-item p-category" rel="tag">ie7</a><span class="sep">, </span>
    
      <a href="/blog/tags/#javascript" class="page__taxonomy-item p-category" rel="tag">javascript</a>
    
    </span>
  </p>






    <p class="page__date">
        <strong><i class="fas fa-fw fa-edit" aria-hidden="true"></i> GitHub:</strong>
        <a href="https://github.com/chase-seibert/blog/blob/master/_posts/2014-06-20-debugging-ie7-crashes.md">_posts/2014-06-20-debugging-ie7-crashes.md</a>
    </p>

        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2014-06-20T00:00:00+00:00">June 20, 2014</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2014/05/30/rich-client-side-web-apps-gone-too-far.html" class="pagination--pager" title="Rich client side web apps gone too far!">Previous</a>
    
    
      <a href="/blog/2014/07/02/haystack-solr-autocommit.html" class="pagination--pager" title="Enabling SOLR autocommit with a custom Haystack backend">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/blog/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="https://chase-seibert.github.io">Chase Seibert Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/blog/assets/js/main.min.js"></script>









  </body>
</html>
