<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Deploying React Native apps with Buddy Build - Chase Seibert Blog</title>
<meta name="description" content="Buddy Build is a great tool for getting your app out to physical devices, whether that is during development, or in production. Their tool is fairly agnostic to frameworks. For example, their documentation is nearly devoid of mentions of React Native, but it’s actually quite simple to get a React Native app building.">


  <meta name="author" content="Chase Seibert">
  
  <meta property="article:author" content="Chase Seibert">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Chase Seibert Blog">
<meta property="og:title" content="Deploying React Native apps with Buddy Build">
<meta property="og:url" content="https://chase-seibert.github.io/blog/2016/11/18/react-native-buddy-build.html">


  <meta property="og:description" content="Buddy Build is a great tool for getting your app out to physical devices, whether that is during development, or in production. Their tool is fairly agnostic to frameworks. For example, their documentation is nearly devoid of mentions of React Native, but it’s actually quite simple to get a React Native app building.">





  <meta name="twitter:site" content="@chase_seibert">
  <meta name="twitter:title" content="Deploying React Native apps with Buddy Build">
  <meta name="twitter:description" content="Buddy Build is a great tool for getting your app out to physical devices, whether that is during development, or in production. Their tool is fairly agnostic to frameworks. For example, their documentation is nearly devoid of mentions of React Native, but it’s actually quite simple to get a React Native app building.">
  <meta name="twitter:url" content="https://chase-seibert.github.io/blog/2016/11/18/react-native-buddy-build.html">

  
    <meta name="twitter:card" content="summary">
    
  

  



  <meta property="article:published_time" content="2016-11-18T00:00:00+00:00">






<link rel="canonical" href="https://chase-seibert.github.io/blog/2016/11/18/react-native-buddy-build.html">







  <meta name="google-site-verification" content="KbUN2yK33xTFIQa6xopl2QZyG02prTwsPwnCTjRRYMM" />






<!-- end _includes/seo.html -->



  <link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Chase Seibert Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/blog/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <link rel="icon" href="/blog/favicon.ico" type="image/x-icon">
<link rel="shortcut icon" href="/blog/favicon.ico" type="image/x-icon">
<a rel="me" href="https://hachyderm.io/@chase_seibert"></a>
  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/blog/">
          Chase Seibert Blog
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/blog/me/"
                
                
              >Top Posts</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/reading-list/"
                
                
              >Reading List</a>
            </li><li class="masthead__menu-item">
              <a
                href="/blog/resume.pdf"
                
                
              >Resume</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person" class="h-card">

  
    <div class="author__avatar">
      <a href="https://chase-seibert.github.io/blog/">
        <img src="/blog/images/chase-square.jpg" alt="Chase Seibert" itemprop="image" class="u-photo">
      </a>
    </div>
  

  <div class="author__content">
    <h3 class="author__name p-name" itemprop="name">
      <a class="u-url" rel="me" href="https://chase-seibert.github.io/blog/" itemprop="url">Chase Seibert</a>
    </h3>
    
      <div class="author__bio p-note" itemprop="description">
        <p>Director of Engineering at Dropbox</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name" class="p-locality">San Francisco, CA</span>
        </li>
      

      
        
          
            <li><a href="https://www.facebook.com/chase.seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-facebook-square" aria-hidden="true"></i><span class="label">Facebook</span></a></li>
          
        
          
            <li><a href="https://github.com/chase-seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-github" aria-hidden="true"></i><span class="label">GitHub</span></a></li>
          
        
          
            <li><a href="https://www.goodreads.com/chaseseibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-goodreads" aria-hidden="true"></i><span class="label">Goodreads</span></a></li>
          
        
          
            <li><a href="https://letterboxd.com/quasigenx/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fas fa-fw fa-film" aria-hidden="true"></i><span class="label">Letterboxd</span></a></li>
          
        
          
            <li><a href="https://www.linkedin.com/in/chaseseibert/" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span class="label">LinkedIn</span></a></li>
          
        
          
            <li><a href="https://hachyderm.io/@chase_seibert" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-mastodon" aria-hidden="true"></i><span class="label">Mastodon</span></a></li>
          
        
          
            <li><a href="https://stackoverflow.com/users/7679" rel="nofollow noopener noreferrer me" itemprop="sameAs"><i class="fab fa-fw fa-stack-overflow" aria-hidden="true"></i><span class="label">Stack Overflow</span></a></li>
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer me">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Deploying React Native apps with Buddy Build">
    <meta itemprop="description" content="Buddy Build is a great tool for getting your app outto physical devices, whether that is during development, or in production. Theirtool is fairly agnostic to frameworks. For example, their documentation is nearlydevoid of mentions of React Native, but it’s actually quite simple to get aReact Native app building.">
    <meta itemprop="datePublished" content="2016-11-18T00:00:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://chase-seibert.github.io/blog/2016/11/18/react-native-buddy-build.html" itemprop="url">Deploying React Native apps with Buddy Build
</a>
          </h1>
          


        </header>
      

      <section class="page__content" itemprop="text">
        
        <p><a href="https://buddybuild.com/">Buddy Build</a> is a great tool for getting your app out
to physical devices, whether that is during development, or in production. Their
tool is fairly agnostic to frameworks. For example, their documentation is nearly
devoid of mentions of React Native, but it’s actually quite simple to get a
React Native app building.</p>

<p>In fact, nearly all the challenges we faced involved specific requirements, for
example having multiple builds with different configurations. In the end, most
of our learnings were about React Native itself. But maybe this guide will be
useful to other people who are trying to not only figure out how Buddy Build
works, but how React Native builds work.</p>

<h1 id="private-npm-repositories">Private NPM Repositories</h1>

<p>If you have a private NPM repository, you can upload the <code class="language-plaintext highlighter-rouge">.npmrc</code> file
using the “Secure Files” feature in Buddy Build. We ended up doing the same
for gradle.properties. For the later, you need a <a href="http://docs.buddybuild.com/docs/custom-prebuild-and-postbuild-steps">custom post-clone script</a>
to copy the file into the correct location.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="nb">cp</span> <span class="k">${</span><span class="nv">BUDDYBUILD_SECURE_FILES</span><span class="k">}</span>/.npmrc <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> ~/.gradle
<span class="nb">cp</span> <span class="k">${</span><span class="nv">BUDDYBUILD_SECURE_FILES</span><span class="k">}</span>/gradle.properties ~/.gradle
</code></pre></div></div>

<h1 id="multiple-configurations">Multiple configurations</h1>

<p>Maybe you have a use case where you want to have multiple builds that you actually
distribute to phones for testing. In our case, we wanted a staging build and a
production build. Both needed to be fully self-contained, with the Javascript
packaged into the app. But the URLs for the APIs they were hitting, as well as
some of the API keys, needed to be different.</p>

<p>We ended up using <a href="https://github.com/luggit/react-native-config">react-native-config</a>
to create <code class="language-plaintext highlighter-rouge">.env.staging</code> and <code class="language-plaintext highlighter-rouge">.env.production</code> config files. In order to be able
to re-use some exiting Node code, we also mapped these into the
<code class="language-plaintext highlighter-rouge">process.env</code> space.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nx">Config</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">react-native-config</span><span class="dl">'</span><span class="p">;</span>

<span class="kd">const</span> <span class="nx">env</span> <span class="o">=</span> <span class="nx">Config</span><span class="p">;</span>

<span class="c1">// this is for backwards compatibility with existing Node pattern</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">injectEnv</span><span class="p">()</span> <span class="p">{</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">assign</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">,</span> <span class="nx">env</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h1 id="debug-builds">Debug Builds</h1>

<p>For iOS, React Native has two “variants”, <code class="language-plaintext highlighter-rouge">debug</code> and <code class="language-plaintext highlighter-rouge">release</code>. For Android,
React Native will have gradle builds with the same names. In both cases, the
primary difference is whether the Javascript code is packaged and bundled with
the build, or loaded from a live packager running outside the app. Initially, we
tried to separate configuration by debug/release, and were confused when debug
builds deployed via Buddy Build crashed immediately. It turns out they were
trying and failing to connect to a packager.</p>

<p>The solution is to have <em>multiple release builds</em>.</p>

<h1 id="multiple-ios-builds">Multiple iOS Builds</h1>

<p>On iOS, making a second release build is just duplicating your Release scheme in XCode.
<strong>Note: the new schemes must be marked as “shared” in XCode.</strong> You also want to
make sure that in the scheme definition, all the targets for Build/Run/Archive etc
are set to “Release”, not “Debug”. This is what React Native uses to determine
whether to package the Javascript code, or not.</p>

<p>You can follow the <a href="https://github.com/luggit/react-native-config#ios-1">react-native-config iOS setup</a>
to get it to pick up a different <code class="language-plaintext highlighter-rouge">.env</code> file per scheme. We ended up using the
recommended <code class="language-plaintext highlighter-rouge">Build -&gt; Pre-action</code> step, which worked fine. You could probably
also get our Android branch solution to work.</p>

<h1 id="multiple-android-builds">Multiple Android Builds</h1>

<p>On Android, creating a second release build was more problematic. It should be
possible to create additional gradle variants, but after a lot of experimentation,
we could not stop those builds from crashing on physical devices. At a low level,
we were never sure how React Native was choosing to bundle the package, or not.
We assumed it was based on the name of the build, but we’re not sure.</p>

<p>What we ended up doing is changing our build script to push multiple release
branches up to GitHub, one for <code class="language-plaintext highlighter-rouge">staging</code> and one for <code class="language-plaintext highlighter-rouge">production</code>. We then
configured the Buddy Build project for Android to run a custom pre-build script to
copy in the correct <code class="language-plaintext highlighter-rouge">.env</code> file based on git branch.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="nb">echo</span> <span class="s2">"BUDDYBUILD_BRANCH: </span><span class="nv">$BUDDYBUILD_BRANCH</span><span class="s2">"</span>
<span class="k">if</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$BUDDYBUILD_BRANCH</span><span class="s2">"</span> <span class="o">=</span> <span class="s2">"production"</span> <span class="o">]</span>
<span class="k">then
   </span><span class="nb">echo</span> <span class="s2">"Using .env.production"</span>
   <span class="nb">cp</span> <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>/.env.production <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>/.env
<span class="k">else
   </span><span class="nb">echo</span> <span class="s2">"Using .env.staging"</span>
   <span class="nb">cp</span> <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>/.env.staging <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>/.env
<span class="k">fi

</span><span class="nb">cat</span> <span class="k">${</span><span class="nv">BUDDYBUILD_WORKSPACE</span><span class="k">}</span>/.env
</code></pre></div></div>

<h1 id="buddy-build-sdks">Buddy Build SDKs</h1>

<p>The SDKs, which enables user feedback in the app, was fantastically useful.
Highly recommended!</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/blog/tags/#app" class="page__taxonomy-item p-category" rel="tag">app</a><span class="sep">, </span>
    
      <a href="/blog/tags/#react-native" class="page__taxonomy-item p-category" rel="tag">react-native</a>
    
    </span>
  </p>






    <p class="page__date">
        <strong><i class="fas fa-fw fa-edit" aria-hidden="true"></i> GitHub:</strong>
        <a href="https://github.com/chase-seibert/blog/blob/master/_posts/2016-11-18-react-native-buddy-build.md">_posts/2016-11-18-react-native-buddy-build.md</a>
    </p>

        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2016-11-18T00:00:00+00:00">November 18, 2016</time></p>

      </footer>

      

      
  <nav class="pagination">
    
      <a href="/blog/2016/11/04/tiger-team-survival-part-1.html" class="pagination--pager" title="Tiger Team Survival Guide">Previous</a>
    
    
      <a href="/blog/2016/12/09/react-native-android-staging-variant.html" class="pagination--pager" title="React Native Multiple Release Variants">Next</a>
    
  </nav>


    </div>

    
  </article>

  
  
</div>

      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    
      <li><a href="/blog/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="https://chase-seibert.github.io">Chase Seibert Blog</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/jekyll-themes/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/blog/assets/js/main.min.js"></script>









  </body>
</html>
